<!-- HTML CODE -->

    <header>

        <div id="navbar">
            <!-- Logo -->
            <div class="logo">
                <a href="">R<span class="material-symbols-outlined">star_rate</span>TEFL<span>I</span>X</a>
            </div>

            <!-- Navigation -->
            <nav class="nav">
                <li><a href="">Home</a></li>
                <span>|</span>
                <li><a href="">Categories</a></li>
                <span>|</span>
                <li><a href="">About</a></li>
                <span>|</span>
                <li><a href="">Support</a></li>
                <span>|</span>
                <li><a href="">Community</a></li>
            </nav>

        </div>
        <div class="hero">
            <h2>Discover movies you will actually <span>enjoy</span>!</h2>
            <p>Find the best films, see what others think, and share your ratings</p>
            <form action="">
                <input type="search" name="search" id="search" placeholder="Search for movies, TV shows, actors...">
                <button type="submit">Search</button>
            </form>
        </div>

            <div class="container">
            
            </div>
    </header>

    <!-- Trending Section -->
    <section class="trending">
        <h2>Trending Movies</h2>
        <div class="movies-container">
            <div class="both">
                <div class="item"><a href=""><img src="assets/tom and jerry.jpg" alt=""> </a></div>
                <p>Tom and Jerry</p>
                <div class="info">
                    <a href="">Cartoon</a>, <a href="">Comedy</a>. / <a href="">256 reviews</a>
                </div>
                <button type="submit">Preview</button>
            </div>

            <div class="both">
                <div class="item"><a href=""><img src="assets/mantis.jpg" alt=""></a></div>
                <p>Mantis</p>
                <div class="info">
                    <a href="">Action</a>, <a href="">Triller</a>. / <a href="">656 reviews</a>
                </div>
                <button type="submit">Preview</button>
            </div>

            <div class="both">
                <div class="item"><a href=""><img src="assets/demon city.jpg" alt=""></a></div>
                <p>Demon City</p>
                <div class="info">
                    <a href="">Horror</a>, <a href="">Fantasy</a>. / <a href="">1.2K reviews</a>
                </div>
                <button type="submit">Preview</button>
    </section>

    <!-- Preview Section -->
    <section class="preview">

        <h2 class="preview-top">Featured This Week</h2>
        <div class="slides">
            <div class="slide">
                <div class="movie-poster">
                    <video src="assets/WhatsApp Video 2025-12-08 at 09.00.47_151e86ea.mp4" controls
                        loop </video>
                </div>

                <div class="movie-details">
                    <h2>Spider-Man: Into the Spider verse</h2>

                    <p>Spider Man Into the Spider Verse is an animated superhero film that follows Miles Morales, a
                        teenager who gains spider powers and discovers that he is not the only Spider hero. When a
                        dangerous collider experiment tears open the multiverse, different versions of Spider Man
                        appear, including Peter B Parker, Gwen Stacy, Spider Man Noir, Peni Parker and Spider Ham. They
                        must work together to stop Kingpin from destroying their worlds. The movie blends vibrant comic
                        book visuals, emotional storytelling and humor, creating a unique style and a powerful coming of
                        age journey for Miles as he learns what it truly means to be a hero.</p>

                    <div class="info">
                        <a href="">Action</a>, <a href="">Triller</a>. / <a href="">656 reviews</a>
                    </div>

                    <div class="review-icon">
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                    </div>
                    <button type="submit">Rate Now </button>

                </div>
            </div>

            <div class="slide">
                <div class="movie-poster">
                    <video src="assets/WhatsApp Video 2025-12-08 at 09.00.47_151e86ea.mp4" controls autoplay
                        loop></video>
                </div>

                <div class="movie-details">
                    <h2>Spider-Man: Into the Spider verse</h2>

                    <p>Spider Man Into the Spider Verse is an animated superhero film that follows Miles Morales, a
                        teenager who gains spider powers and discovers that he is not the only Spider hero. When a
                        dangerous collider experiment tears open the multiverse, different versions of Spider Man
                        appear, including Peter B Parker, Gwen Stacy, Spider Man Noir, Peni Parker and Spider Ham. They
                        must work together to stop Kingpin from destroying their worlds. The movie blends vibrant comic
                        book visuals, emotional storytelling and humor, creating a unique style and a powerful coming of
                        age journey for Miles as he learns what it truly means to be a hero.</p>

                    <div class="info">
                        <a href="">Action</a>, <a href="">Triller</a>. / <a href="">656 reviews</a>
                    </div>

                    <div class="review-icon">
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                    </div>
                    <button type="submit">Rate Now </button>

                </div>
            </div>

            <div class="slide">
                <div class="movie-poster">
                    <video src="assets/WhatsApp Video 2025-12-08 at 09.00.47_151e86ea.mp4" controls autoplay
                        loop></video>
                </div>

                <div class="movie-details">
                    <h2>Spider-Man: Into the Spider verse</h2>

                    <p>Spider Man Into the Spider Verse is an animated superhero film that follows Miles Morales, a
                        teenager who gains spider powers and discovers that he is not the only Spider hero. When a
                        dangerous collider experiment tears open the multiverse, different versions of Spider Man
                        appear, including Peter B Parker, Gwen Stacy, Spider Man Noir, Peni Parker and Spider Ham. They
                        must work together to stop Kingpin from destroying their worlds. The movie blends vibrant comic
                        book visuals, emotional storytelling and humor, creating a unique style and a powerful coming of
                        age journey for Miles as he learns what it truly means to be a hero.</p>

                    <div class="info">
                        <a href="">Action</a>, <a href="">Triller</a>. / <a href="">656 reviews</a>
                    </div>

                    <div class="review-icon">
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                        <span class="material-symbols-outlined">
                            star_rate
                        </span>
                    </div>
                    <button type="submit">Rate Now </button>

                </div>
            </div>
        </div>
    </section>

<!-- JS code -->



// following navbar on scroll
const navbar = document.getElementById('navbar');

window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
    navbar.classList.add('scrolled');
    } else {
    navbar.classList.remove('scrolled');
  }
});

// getting the search input in header
const form = document.querySelector('form');

form.addEventListener('submit', (e) => {
    e.preventDefault()
    let query = form.querySelector('input').value

    tvMazeApi()
});

// getting movie from API

const container = document.querySelector('.container')

async function tvMazeApi(query) {
    const apiKey = `http://www.omdbapi.com/?s=${query}&page=i&apikey=d234eab1`
    const request = await fetch(`${apiKey}`);
    const data = await request.json() 
    console.log(data);
    const movies = data.Search;
    
    
    makeImages(movies);
    
}

function makeImages(movies) {
  for (let movie of movies) {
    let src = movie.show.image.medium;

    const img = document.createElement("img")
    img.src = src;

    container.appendChild(img);
  }
    
}

// featured movies carousel
const slides = document.querySelector('.slides');
const slideCount = document.querySelectorAll(".slide").length;
let index = 0;

function nextSlide() {
  index++;
  slides.style.transition = "transform 0.6s ease";
  slides.style.transform = `translateX(-${index * 100}vw)`;

  if (index >=   slideCount) {
    setTimeout(() => {
      slides.style.transition = "none";
      index = 0;
      slides.style.transform = `translateX(0)`;
    }, 600);
  }
}

setInterval(nextSlide, 15000);

<!-- Css code -->

/* 
    colors
        #FFD700 > yellow
        #1C1C1C > black
        #DC143C > red
        #E50914 > red
*/

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html{
    scroll-behavior: smooth;
}

body {
    font-family: Arial, Helvetica, sans-serif;
    background-color: #1c1c1ce7;
    color: white;
}

header {
    background-image: linear-gradient(#1c1c1c9f), url(assets/pexels-brunomassao-2335048.jpg);
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
    width: 100vw;
    height: 100vh;
    position: absolute;
    top: 0;
}

#navbar{
    display: flex;
    padding-top: 50px;
    width: 100vw;
    padding-left: 70px;
    align-items: center;
    z-index: 1; 
    position: fixed;
    background: transparent;
    top: 0;
    left: 0;
    transition: background-color 0.5s ease;
}

#navbar.scrolled {
    background-color: #1c1c1ce1;
    transition: background-color 0.5s ease;
    padding: 40px;
}


.logo a{
    text-decoration: none;
    color: #FFD700;
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    font-weight: 800;
    font-size: 30px;
}

.logo span {
    color: #E50914;
}

.nav {
    margin-left: 200px;
    list-style: none;
    display: flex;
}

.nav a {
    text-decoration: none;
    color: white;
    font-weight: 500;
    margin-left: 30px;
    font-size: 18px;
    transition: 0.6s;
}

.nav a:hover {
    text-decoration: 1px underline #FFD700;
    text-underline-offset: 10px;
}

.nav span {
    color: #FFD700;
    padding-left: 50px;
    font-weight: 800;
}

/* Hero */
.hero {
    color: white;
    text-align: center;
    margin-top: 300px;
}

.hero h2 {
    font-size: 50px;
    font-weight: 900;
    transition: 0.6s;
}

.hero h2 span {
    color: #FFD700;
}

.hero h2:hover {
    color: #FFD700;
}

.hero p {
    font-size: 20px;
    margin-top: 20px;
    font-weight: 400;
}

.hero input {
    width: 400px;
    height: 40px;
    margin-top: 30px;
    border-radius: 5px;
    border: none;
    padding-left: 10px;
    font-size: 16px;
}

.hero button {
    width: 100px;
    height: 44px;
    margin-left: 10px;
    border-radius: 5px;
    border: none;
    background-color: #E50914;
    color: white;
    font-size: 16px;
    cursor: pointer;
    transition: 0.6s;
}

.hero button:hover {
    background-color: #FFD700;
    color: #1C1C1C;
}

/* Trending */
.trending {
    background-color: rgba(128, 128, 128, 0.106);
    width: 90vw;
    margin: 50px auto;
    height: 110vh;
    padding: 20px;
    border-radius: 50px;
    color: white;
    margin-top: 800px;
}

.trending h2 {
    margin-top: 30px;
    margin-left: 50px;
    font-size: 50px;
    font-weight: 800;
    color: #FFD700;
}

.movies-container {
    margin-top: 70px;
    margin-left: 50px;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}

.item {
    width: 350px;
    height: 450px;
    background-color: #FFD700;
    border-radius: 10px;
    overflow: hidden;
}

.item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.item img:hover {
    transform: scale(1.1);
}

.both p {
    padding: 10px;
    font-size: 20px;
    font-weight: 700;
    color: white;
}

.info {
    margin-left: 10px;
}

.info a {
    text-decoration: none;
    color: white;
    font-size: 18px;
}

.info a:hover {
    text-decoration: 1.5px underline #E50914;
    text-underline-offset: 5px;
}

.both button {
    width: 100px;
    height: 40px;
    border: none;
    border-radius: 5px;
    background-color: #E50914;
    color: white;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 10px;
    margin-left: 10px;
    transition: 0.6s;
}

.both button:hover {
    background-color: #FFD700;
    color: #1C1C1C;
}

/* Preview Section */

.preview {
    width: 100vw;
    position: relative;
    overflow: hidden;
}

.preview-top {
    padding-top: 50px;
    margin-left: 130px;
    font-size: 50px;
    font-weight: 800;
    color: #FFD700;

}

.slides{
    width: 300vw;
    margin-top: 30px;
    display: flex;
    padding-bottom: 20px;
}

.slide {
    width: 100vw;
    margin: 50px auto;
    margin-top: -5px;
    height: 60vh;
    padding: 40px;
    color: white;
    display: flex;
    justify-content: center ;
}

.movie-poster {
    height: 100%;
    margin: 0 auto;
    border-radius: 20px;
}

.movie-poster video {
    width: 550px;
    height: 350px;
    border-radius: 20px;
    object-fit: cover;
    margin-left: 20px;  
    box-shadow: -4px 7px 25px #1C1C1C;
}   

.movie-details {
    margin-left: 40px;
    width: 50vw;
}

.movie-details h2 {
    font-size: 40px;
    font-weight: 800;
    margin-bottom: 20px;
}

.movie-details p {
    font-size: 18px;
    font-weight: 500;
    text-align: justify;
}

.movie-details .info {
    font-size: 18px;
    margin-left: -3px;
    margin-top: 10px;
}

.movie-details span {
    padding-top: 10px;
    font-weight: 700;
    color: #FFD700;
    cursor: pointer;
}

.movie-details button {
    width: 120px;
    height: 44px;
    border: none;
    border-radius: 5px;
    background-color: #E50914;
    color: white;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 10px;
    transition: 0.6s;
}     

.movie-details button:hover {
    background-color: #FFD700;
    color: #1C1C1C;
}

<!-- js new -->
// API keys = "48f905b8", "d234eab1"
const API_KEY = "d234eab1";

/* ⭐ ADDED: GLOBAL RATING STORAGE */
const ratings = JSON.parse(localStorage.getItem("movieRatings")) || {};

function saveRating(imdbID, value) {
  ratings[imdbID] = value;
  localStorage.setItem("movieRatings", JSON.stringify(ratings));
}

function getRating(imdbID) {
  return ratings[imdbID] || 0;
}

function createStarRating(imdbID, container) {
  container.innerHTML = "";
  for (let i = 1; i <= 5; i++) {
    const star = document.createElement("span");
    star.textContent = "★";
    star.style.cursor = "pointer";
    star.style.fontSize = "20px";
    star.style.color = i <= getRating(imdbID) ? "gold" : "#ccc";

    star.addEventListener("click", () => {
      saveRating(imdbID, i);
      createStarRating(imdbID, container);
    });

    container.appendChild(star);
  }
}
/* ⭐ END ADDED */


// MAKE PAGE ACTIVE
const navLinks = document.querySelectorAll('.nav a');
const currentPath = window.location.pathname;
const currentPage = currentPath.substring(currentPath.lastIndexOf('/') + 1) || 'index.html';

navLinks.forEach(link => {
    const linkHref = link.getAttribute('href');
    if (!linkHref) return;
    const linkPage = linkHref.substring(linkHref.lastIndexOf('/') + 1);
    if (linkPage === currentPage) link.classList.add('active');
    else link.classList.remove('active');
});


// TRENDING SECTION
const trendingContainer = document.getElementById("trendingMovies");

const trendingTitles = ["Sinners", "Mantis", "Demon City"];

async function loadTrendingMovies() {
  trendingContainer.innerHTML = "";

  for (let title of trendingTitles) {
    const response = await fetch(
      `https://www.omdbapi.com/?t=${encodeURIComponent(title)}&apikey=${API_KEY}`
    );
    const movie = await response.json();
    if (movie.Response === "False") continue;

    const card = document.createElement("div");
    card.className = "both";

    card.innerHTML = `
      <div class="item">
        <img src="${movie.Poster !== "N/A" ? movie.Poster : ""}">
      </div>
      <p>${movie.Title}</p>
      <div class="info">${movie.Genre}</div>
      <div class="rating"></div>
      <button type="button">Preview</button>
    `;

    /* ⭐ ADDED: TRENDING RATING */
    const ratingBox = card.querySelector(".rating");
    createStarRating(movie.imdbID, ratingBox);

    trendingContainer.appendChild(card);
  }
}

document.addEventListener("DOMContentLoaded", loadTrendingMovies);


// CAROUSEL
const slidesContainer = document.querySelector('.slides');
const apiKey = "d234eab1";

const movies = [
  "Spider Man Across the Spider Verse",
  "mantis",
  "The Dark Knight",
  "Inception"
];

async function loadMovies() {
  for (const title of movies) {
    const response = await fetch(
      `https://www.omdbapi.com/?t=${encodeURIComponent(title)}&apikey=${apiKey}`
    );
    const data = await response.json();

    if (data.Response === "True") {
      const slide = document.createElement('div');
      slide.classList.add('slide');

      slide.innerHTML = `
        <h2>${data.Title}</h2>
        <button>Rate Now</button>
        <div class="carousel-rating"></div>
      `;

      /* ⭐ ADDED: CAROUSEL RATING */
      const btn = slide.querySelector("button");
      const ratingDiv = slide.querySelector(".carousel-rating");

      btn.addEventListener("click", () => {
        createStarRating(data.imdbID, ratingDiv);
      });

      slidesContainer.appendChild(slide);
    }
  }
}

loadMovies();


// GENRE MODAL
const modal = document.createElement('div');
modal.classList.add('movie-modal');
modal.innerHTML = `
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2></h2>
    <p></p>
    <div class="modal-rating"></div>
  </div>
`;
document.body.appendChild(modal);

const modalRating = modal.querySelector(".modal-rating");
const closeModal = modal.querySelector(".close");
closeModal.onclick = () => modal.style.display = "none";


// GENRE SECTION
const genreSection = document.querySelector('.genre-section');
const genreMovies = {
  Action: ["Sinners", "Deadpool"]
};

async function loadGenresWithMovies() {
  for (let genre in genreMovies) {
    const row = document.createElement("div");
    row.innerHTML = `<h3>${genre}</h3>`;
    const container = document.createElement("div");

    for (let title of genreMovies[genre]) {
      const res = await fetch(
        `https://www.omdbapi.com/?t=${encodeURIComponent(title)}&apikey=${apiKey}`
      );
      const movie = await res.json();
      if (movie.Response === "False") continue;

      const card = document.createElement("div");
      card.innerHTML = `<img src="${movie.Poster}">`;

      card.addEventListener("click", () => {
        modal.querySelector("h2").textContent = movie.Title;
        modal.querySelector("p").textContent = movie.Plot;
        modal.style.display = "flex";

        /* ⭐ ADDED: MODAL RATING */
        createStarRating(movie.imdbID, modalRating);
      });

      container.appendChild(card);
    }

    row.appendChild(container);
    genreSection.appendChild(row);
  }
}

loadGenresWithMovies();




